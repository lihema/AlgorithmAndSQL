#设计模式

##设计模式概览

###1.面向对象与设计模式需要掌握的特性
````
·面向对象的四大特性：封装、抽象、继承、多态
·面向对象编程与面向过程的区别与联系
·面向对象分析、面向对象设计、面向对象编程
·接口和抽象类的区别以及各自的应用场景
·基于接口而非实现编程的设计思想
·多用组合少用继承的设计思想
·面向过程的贫血模型和面向对象的充血模型
````
###2.设计原则
````
SOLID原则
·SRP 单一职责
·OCP 开闭原则
·LSP 里式替换原则
·ISP 接口隔离原则
·DIP 依赖倒置原则

·DRY原则
·KISS原则
·YAGNI原则
·LOD法则
````
###3.设计模式
````
1.创建型
常用：
单例模式、工厂模式、建造者模式

不常用：
原型模式

2.结构型
常用：
代理模式、桥接模式、装饰着模式、适配器模式

不常用：
门面模式、组合模式、享元模式


3.行为型
常用的有：观察者模式、模板模式、策略模式、职责链模式、迭代器模式、状态模式

不常用的有：访问者模式、备忘录模式、命令模式、解释器模式、中介模式

````
###4.编程规范
````
baba规范
````
###5.代码重构
````
注重 重构的目的（why）、对象（what）、时机（when）、方法（how）;
保证重构不出错的技术手段：单元测试和代码的可测试性；
两种不同规模的重构：大重构（大规模高层次）和小重构（小规模低层次）
````
###6.联系

##面向对象
###什么是面向对象
````
只要某种编程语言支持类或对象的语法概念，并且以此作为组织代码的基本单元，那就可以被粗略地认为它就是面向对象编程语言了
````
###面向对象分析和面向对象设计
````
面向对象分析就是要搞清楚做什么
面向对象设计就是要搞清楚怎么做
面向对象编程就是将分析和设计的的结果翻译成代码的过程
与DDD结合
````
##四大特性解决什么问题
###封装
````
封装的意义在于控制访问权限，不设置set方法，保证有些值在构造方法初始化完成后就不能再传值
隐藏信息、保护数据
````
###抽象
````
1.简化复杂系统，只关注方法本身，不去考虑实现
2.开闭原则、代码解耦（基于接口）
3.加一层包装
````
###继承
````
1.主要解决代码复用
2.表示类之间的 is-a 关系
````
###多态
````
继承加方法重写
接口类语法
多态特性能提高代码的可扩展性和复用性：用父类或者接口的方法重写或实现将一个方法有不同实现

````
###接口和抽象类有哪些区别
````
抽象类：
1.不能被实例化
2.可以包含属性和方法
3.子类继承抽象类必须实现抽象类中的所有抽象方法

解决问题：
1.代码复用问题
2.将关键方法写成抽象方法，保证核心方法需要被实现，实现多态

接口：
1.不能包含属性
2.接口只能声明方法，方法不能包含代码实现
3.必须实现接口中的全部方法

解决问题：
1.用于解耦，提升扩展性

接口还是抽象类
is-a代码复用抽象
has-a解决抽象问题
抽象类是一种自下而上的设计思路，先有子类的代码重复，然后再抽象成上层的父类（也就是抽象类）。而接口正好相反，它是一种自上而下的设计思路。
我们在编程的时候，一般都是先设计接口，再去考虑具体的实现。
````
###接口的意义
````
接口”就是一组“协议”或者“约定”，是功能提供者提供给使用者的一个“功能列表”。

上游系统面向接口而非实现编程，不依赖不稳定的实现细节，这样当实现发生变化的时候，上游系统的代码基本上不需要做改动，以此来降低耦合性，提高扩展性。

越抽象、越顶层、越脱离具体某一实现的设计，越能提高代码的灵活性，越能应对未来的需求变化。好的代码设计，不仅能应对当下的需求，
而且在将来需求发生变化的时候，仍然能够在不破坏原有代码设计的情况下灵活应对。

何时定义为接口：
1.实现类必须有扩展的需求
2.从整体系统上看系统不太稳定，需要不断升级

解决接口实现问题使用多态可以使用 配置文件+反射+工厂模式


1、简单工厂方法
ImageStore imageStore = ImageStoreFactory.newInstance(SOTRE_TYPE_CONFIG);
config文件可以写类似properties的文件，使用key-value存储。

缺点：再新增另一种存储手段时，需要修改工厂类和添加新的类。修改工厂类，违反了开放-封闭原则。

那有没有更好一点的方法呢？

2、使用反射。
在配置文件中定义需要的image store类型。
在ProcessJob中
ImageStore store = (ImageStore) Class.forName(STORE_CLASS)
    .newInstance();

缺点：使用反射，在大量创建对象时会有性能损失。

````
### 多用组合少用继承
````
组合：用接口实现，一个接口放一个功能，一个对象可以实现多个接口达到组合的效果

public interface Flyable {
  void fly();
}
public interface Tweetable {
  void tweet();
}
public interface EggLayable {
  void layEgg();
}
public class Ostrich implements Tweetable, EggLayable {//鸵鸟
  //... 省略其他属性和方法...
  @Override
  public void tweet() { //... }
  @Override
  public void layEgg() { //... }
}
public class Sparrow impelents Flayable, Tweetable, EggLayable {//麻雀
  //... 省略其他属性和方法...
  @Override
  public void fly() { //... }
  @Override
  public void tweet() { //... }
  @Override
  public void layEgg() { //... }
}

继承：
````


